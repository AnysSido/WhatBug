@model WhatBug.WebUI.ViewModels.Projects.ProjectUsersAndRolesViewModel 

@section Styles {
    <link rel="stylesheet" href="~/lib/select2/css/select2.min.css" />
    <link rel="stylesheet" href="~/lib/select2-bootstrap4-theme/select2-bootstrap4.min.css" />
}

@{
    ViewData["Title"] = "UsersAndRoles";
}

<div class="input-group">
    <button type="button" class="btn btn-default mdl">
        Add User to Role
    </button>
</div>

<!-- Data for add user to role modal -->
<form id="addUserToRoleModalData">
    <input asp-for="@Model.ProjectId" />
</form>

<!-- Add user to role modal to be populated by partial view -->
<div class="modal fade" id="addUserToRoleModal"></div>

@section Scripts {
    <script type="text/javascript" src="~/lib/select2/js/select2.min.js"></script>
    <script type="text/javascript">
        $(function () {
            $('.mdl').on('click', function () {
                $.post('/projects/getaddusertoprojectrolepartial',
                    $('#addUserToRoleModalData').serialize()
                ).done(function (response) {
                    $('#addUserToRoleModal').html(response);
                    RegisterPartialJS();
                    $('#addUserToRoleModal').modal('show');
                });
            });
        });

        function RegisterPartialJS() {
            $('.select2').select2({
                width: '100%',
                theme: 'bootstrap4',
                dropdownParent: $('#addUserToRoleModal .modal-body')
            });
        };
    </script>
}